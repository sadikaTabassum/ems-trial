<%- include('../partials/header.ejs') %> <%- include('../partials/navbar.ejs')
%>

<section class="h-lvh">
  <h2 class="text-2xl mb-2 px-12 text-gray-900">
    Rooms for Reservation <%= reservationId %>
  </h2>

  <% if (typeof reservationInfo !== 'undefined' && reservationInfo) { %>
  <div class="px-12 mb-4 text-sm text-gray-700">
    <div>
      <span class="font-semibold"><%= reservationInfo.event_name %></span>
      at <span class="font-semibold"><%= reservationInfo.hotel_name %></span>
    </div>
    <div>
      <span><%= reservationInfo.start_date %></span> →
      <span><%= reservationInfo.end_date %></span>
      · Status: <% if (Number(reservationInfo.status) === 1) { %>
      <span class="text-green-600 font-medium">Reserved</span>
      <% } else if (Number(reservationInfo.status) === 2) { %>
      <span class="text-yellow-600 font-medium">Cancelled</span>
      <% } else { %>
      <span class="text-gray-600 font-medium">Finished</span>
      <% } %>
    </div>
  </div>
  <% } %>

  <div class="flex flex-col">
    <div class="overflow-x-auto sm:mx-0.5 lg:mx-0.5">
      <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
        <div class="overflow-hidden shadow-lg rounded-xl bg-white border">
          <table class="min-w-full table-auto">
            <thead class="border-b bg-gray-50">
              <tr>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  #
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Room Size
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Capacity
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Price
                </th>

                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Available Rooms
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Add Rooms
                </th>
              </tr>
            </thead>

            <tbody>
              <% if (rooms && rooms.length > 0) { %> <%
              rooms.forEach(function(room, index) { %>
              <tr class="border-b hover:bg-gray-50">
                <td
                  class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                >
                  <%= index + 1 %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= (room.room_size || '').replace('_',' ') %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <%= room.room_capacity %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  $<%= room.room_price %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <%= room.available_room %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <a
                    href="/event-rooms/<%= reservationId %>/add-room"
                    class="inline-block text-sm px-3 py-1.5 rounded-md border-2 border-slate-500 bg-gray-100 text-slate-700 hover:bg-slate-600 hover:text-white transition"
                  >
                    Add Room
                  </a>
                </td>
              </tr>
              <% }); %> <% } else { %>
              <tr>
                <td
                  colspan="7"
                  class="px-6 py-6 text-center text-gray-600 text-sm"
                >
                  No room info found for this reservation.
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mx-auto">
      <a
        href="/events"
        class="mt-6 inline-block text-sm px-3 py-2 rounded-md border-2 border-rose-400 bg-gray-100 text-gray-900 hover:bg-rose-700 hover:text-white transition"
      >
        &larr; Go Back
      </a>
    </div>
  </div>
</section>

<%- include('../partials/footer.ejs') %>
