<%- include('../partials/header.ejs') %> <%- include('../partials/navbar.ejs')
%>

<section class="h-lvh">
  <h2 class="text-2xl mb-4 px-12 text-gray-900">
    Available Rooms for Event <%= eventId %>
  </h2>

  <div class="flex flex-col">
    <div class="overflow-x-auto sm:mx-0.5 lg:mx-0.5">
      <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
        <div class="overflow-hidden shadow-lg rounded-xl bg-white border">
          <table class="min-w-full table-auto">
            <thead class="border-b bg-gray-50">
              <tr>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  #
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Room Size
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Capacity
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Price
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Total Rooms
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Available Rooms
                </th>
                <th
                  class="text-sm font-semibold text-gray-900 px-6 py-3 text-left"
                >
                  Add Rooms
                </th>
              </tr>
            </thead>

            <tbody>
              <% if (rooms && rooms.length > 0) { %> <%
              rooms.forEach(function(room, index) { %>
              <tr class="border-b hover:bg-gray-50">
                <td
                  class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                >
                  <%= index + 1 %>
                </td>

                <!-- ROOM_SIZE comes from Oracle in UPPERCASE -->
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= (room.ROOM_SIZE || '').replace('_',' ') %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <%= room.ROOM_CAPACITY %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  $<%= room.ROOM_PRICE %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <%= room.TOTAL_ROOM %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <%= room.AVAILABLE_ROOM %>
                </td>

                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  <a
                    href="/event-rooms/<%= eventId %>/add-room"
                    class="inline-block text-sm px-3 py-1.5 rounded-md border-2 border-slate-500 bg-gray-100 text-slate-700 hover:bg-slate-600 hover:text-white transition"
                  >
                    Add Room
                  </a>
                </td>
              </tr>
              <% }); %> <% } else { %>
              <tr>
                <td
                  colspan="7"
                  class="px-6 py-6 text-center text-gray-600 text-sm"
                >
                  No rooms available.
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mx-auto">
      <a
        href="/events"
        class="mt-6 inline-block text-sm px-3 py-2 rounded-md border-2 border-rose-400 bg-gray-100 text-gray-900 hover:bg-rose-700 hover:text-white transition"
      >
        &larr; Go Back
      </a>
    </div>
  </div>
</section>

<%- include('../partials/footer.ejs') %>
