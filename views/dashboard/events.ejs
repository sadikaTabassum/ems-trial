<%- include('../partials/header.ejs') %> <%- include('../partials/navbar.ejs')
%>

<section class="h-lvh">
  <h2 class="text-2xl font-bold mb-4 px-12 text-gray-800">Your Reservations</h2>

  <div class="flex flex-col">
    <div class="overflow-x-auto sm:mx-0.5 lg:mx-0.5">
      <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
        <div class="overflow-hidden shadow-lg rounded-xl">
          <table class="min-w-full table-auto border border-gray-200 bg-white">
            <thead class="bg-gray-100 border-b">
              <tr>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  #
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Reservation
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Event Type (ID)
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Hotel ID
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Room Type (ID)
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Start
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  End
                </th>
                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Quantity
                </th>

                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  People
                </th>

                <th
                  class="text-xs sm:text-sm font-semibold text-gray-800 px-4 sm:px-6 py-3 text-left"
                >
                  Action
                </th>
              </tr>
            </thead>

            <tbody>
              <% if (events && events.length > 0) { %> <%
              events.forEach(function(ev, index) { %>
              <tr class="border-b hover:bg-gray-50 transition">
                <td class="px-4 sm:px-6 py-3 text-sm font-medium text-gray-900">
                  <%= index + 1 %>
                </td>

                <!-- Reservation ID -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <span class="font-semibold"
                    >#<%= ev.EVENT_RESERVATION_ID %></span
                  >
                </td>

                <!-- Event Type (ID only) -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.EVENT_ID %>
                </td>

                <!-- Hotel ID -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.HOTEL_ID %>
                </td>

                <!-- Room Type (ID only) -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.ROOM_ID %>
                </td>

                <!-- Start Date -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.START_DATE ? ev.START_DATE : '' %>
                </td>

                <!-- End Date -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.END_DATE ? ev.END_DATE : '' %>
                </td>

                <!-- Room Quantity -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.ROOM_QUANTITY %>
                </td>

                <!-- Number of People -->
                <td class="px-4 sm:px-6 py-3 text-sm text-gray-700">
                  <%= ev.NO_OF_PEOPLE %>
                </td>

                <!-- View Rooms -->
                <td class="px-4 sm:px-6 py-3 text-sm">
                  <a
                    href="/event-rooms/<%= ev.EVENT_RESERVATION_ID %>"
                    class="px-3 py-1 border border-lime-700 rounded-md bg-gray-100 text-lime-700 hover:bg-lime-700 hover:text-white transition"
                  >
                    View Rooms
                  </a>
                </td>
              </tr>
              <% }) %> <% } else { %>
              <tr>
                <td
                  colspan="12"
                  class="px-6 py-6 text-center text-gray-500 font-medium"
                >
                  No events reserved yet.
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mx-auto mt-6">
      <a
        href="/reserve-event"
        class="text-sm px-4 py-2 border-2 border-lime-700 rounded-md bg-gray-100 text-lime-700 hover:bg-lime-700 hover:text-white transition"
      >
        Reserve Event &rarr;
      </a>
    </div>
  </div>
</section>

<%- include('../partials/footer.ejs') %>
